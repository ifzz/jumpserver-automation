<!-- the message's input -->
<input id="input" type="text" />

<!-- when clicked then an iris websocket event will be sent to the server,
at this example we registered the 'chat' -->
<button onclick="send()">Send</button>
<hr />
        <div id="LOGIN">
            用户名：<input id="user" type="text" />
            密码：<input id="password" type="password" />
            <button onclick="login()">登录</button>
        </div>
        <div id="MFA">
            [MFA auth]:<input id="mfa" type="text" />
            <button onclick="loginmfa()">登录</button>
        </div>
<hr />
<!-- the messages will be shown here -->
<div  id="scrolldIV" style="overflow:auto; height: 500px; width: 100%; border: 1px solid #999; color: red">
    <b><pre id="output" ></pre></b>
</div>

<!-- import the iris client-side library for browser-->
<script src="/iris-ws.js"></script>

<script>
    var scheme = document.location.protocol == "https:" ? "wss" : "ws";
    var port = document.location.port ? (":" + document.location.port) : "";
    // see app.Get("/echo", ws.Handler()) on main.go
    var wsURL = scheme + "://" + document.location.hostname + port+"/echo";

    var input = document.getElementById("input");
    var output = document.getElementById("output");

    // Ws comes from the auto-served '/iris-ws.js'
    var socket = new Ws(wsURL)
    socket.OnConnect(function () {
        output.innerHTML += "Status: Connected\n";
    });

    socket.OnDisconnect(function () {
        output.innerHTML += "Status: Disconnected\n";
    });

    // read events from the server
    socket.On("chat", function (msg) {
        addMessage(msg);
    });

    function send() {
        addMessage(input.value); // write ourselves
        socket.Emit("chat", input.value); // send chat event data to the websocket server
        input.value = ""; // clear the input
    }

    function addMessage(msg) {
        output.innerHTML += msg + "\n";
        add()
        if(msg.indexOf("[MFA auth]:") != -1){
            input.value = msg
        }
        //console.log(msg)
    }

    function add() {
        var div = document.getElementById('scrolldIV');
        //div.innerHTML = div.innerHTML + 'time_' + now.getTime() + '<br />';
        div.scrollTop = div.scrollHeight;
    }

    function login() {
        document.getElementById("input");
    }

    function loginmfa() {

    }
</script>